% !TeX root = ../mat_mod2.tex

\section{
  Постановка задач маршрутизации
}
\label{sect:4.2}
\setcounter{equation}{0}

Используем обозначения и определения,
относящиеся к варианту
(\ref{3.6.1}),
учитываем (\ref{3.6.7}), (\ref{3.6.10}).
Введем новый кортеж функций стоимости:
\bfn
  \label{4.2.1}
  \mathbf{c}\in \car_+[\bbx\times \bbx\times \mathfrak{N}], c_1\in \car_+
  [\bbx\times \bbx\times \mathfrak{N}],\ldots,c_N\in \car_+[\bbx\times
  \bbx\times \mathfrak{N}], f\in \car_+[\bbx]
  ,
\efn
где функция $f$ сохранена.
Как и в 3 главе,
функции (\ref{4.2.1})
предполагаются <<максимально>> продолженными,
что, не представляет каких-либо затруднений
(см. замечание~\ref{z3.3.3}).
Отметим, что по своему смыслу третий аргумент у функций
$\mathbf{c}, c_1,\,\ldots,c_N$ будет
играть в дальнейшем роль списка заданий,
которые  не выполнены на текущий момент времени.
Также возможна ситуация, когда реально функции стоимости,
подобные (\ref{4.2.1}),
зависят  от списка уже выполненных заданий.
Однако этот последний список определяется посредством дополнения того списка,
о котором шла речь ранее, и мы можем использовать схему,
излагаемую далее для варианта со списком невыполненных заданий.

Отметим,
что значения $\mathbf{c}(x,y,K)$
функции $\mathbf{c}$
будут существенны для нас при оценивании перемещений
$x\rightarrow y,$ где $y$ ---
точка мегаполиса в одном из следующих двух случаев:
1) $x= x^o$ и $K = \ov{1,N};$
2) $x\in M_j$ при $j\in \ov{1,N}\sm K,\, K\neq \emp$.
Индекс мегаполиса,
содержащего $y,$ включается в список $K$
(списки для нас --- непустые п/м $\ov{1,N}).$

Если $s\in \ov{1,N},$
то значения $c_s(x,y,K)$
функции $c_s$ будут
использоваться в случаях, когда $(x,y)\in \bbm_s,\, K$ ---
непустое п/м
$\ov{1,N},$
для которого $s\in K.$
Таким образом, как и в \ref{sect:3.3},
значения $c_s$ существенны в вопросах,
связанных с оценкой
(внутренних)
работ,
отвечающих посещению мегаполиса $M_s.$

Полезно иметь в виду,
что в целом ряде прикладных задач зависимость величин
$\mathbf{c}(x,y,K), c_1(x,y,K),\,\ldots,c_N(x,y,K)$
от списка $K$
может быть связана с реальными вредными воздействиями,
отвечающими заданиям с индексами из $K.$
Это, в частности, касается задач, связанных с выполнением
работ по демонтажу радиоактивного оборудования,
изучаемых в \cite{Cha2`}:
речь идет о дозах радиации,
создаваемых недемонтированными на данный момент
излучающими элементами упомянутого оборудования.

В других случаях
(они для нас далее существенны)
использование зависимости
от списка заданий в (\ref{4.2.1})
может отвечать естественному желанию учесть
ограничения некоторых типов.
Здесь упомянутое использование подобно известному
приему, связанному с введением
штрафных функций,
см., например, \cite[202--205]{Cha9`}:
посредством упомянутой зависимости мы стремимся сделать крайне невыгодными
(по результату)
перемещения,
приводящие к нарушению ограничений.

Обсудим последнее обстоятельство на примере ограничения,
связанного с жесткостью листа в задаче 3 главы в том ее варианте,
который можно связать с листовой резкой на машинах с ЧПУ
\cite{Cha10`}.
Итак, пусть
(в данном рассуждении)
мегаполисы $M_1,\,\ldots,M_N$ --- суть конечные
множества на плоскости, содержащиеся в прямоугольнике
$[0,a] \times [0,b],$
где $a > 0$ и $b> 0$ --- два достаточно больших числа.
Учитываем
(см. \ref{sect:3.3}),
что каждый мегаполис $M_j$ связан с контуром
(внутренним или внешним)
некоторой детали
$\mathbf{D}_l,$
где $l\in \ov{1,n}.$
Если уже произведена резка данного контура по соответствующей
ему эквидистанте,
то в результате данной резки образовалась пустота.

Если так или иначе проделана работа по резке контуров,
связанных с мегаполисами, имеющими индексы из непустого множества
$\widetilde{K},\, \widetilde{K}\su \ov{1,N},$
и на очереди находится
врезка в соответствующую точку мегаполиса
$M_j,$ где
$j\in \ov{1,N}\sm \widetilde{K},$
то новую точку врезки надо выбрать в отдалении от
<<суммы пустот>>,
возникших в связи с уже произведенными операциями
резки, характеризуемыми индексами
$k\in \widetilde{K}$
(упомянутые операции были связаны с посещением мегаполисов
$M_k, k\in \widetilde{K}).$

В рамках предлагаемого подхода откажемся от того,
чтобы налагать жесткий запрет на выбор точки врезки вблизи пустот;
такой выбор допускается.
Однако стоимость перемещения в соответствующую непригодную
на самом деле точку назначается очень большой,
а потому такое перемещение становится крайне невыгодным.
Аналогичные соглашения принимаются в отношении
стоимостей (внутренних) работ,
связанных в данной конкретной задаче с
перемещениями от точки врезки к эквидистанте и от эквидистанты к точке
выключения инструмента
(имеются в виду перемещения в режиме рабочего хода).

Заметим, что по ряду причин, связанных с последующим применением ДП,
оказывается более  удобным определять на формальном уровне для функций
стоимости не зависимость от списка
$\widetilde{K}$
уже выполненных на данный момент заданий,
а от списка $K$ еще не выполненных заданий
(как в случае вышеупомянутой задачи о демонтаже),
что, однако, является несущественной редакцией, поскольку
\bfn
  \label{4.2.2}
  \widetilde{K} = \ov{1,N}\sm K
  .
\efn

Это соображение как раз и было учтено выше
(см. (\ref{4.2.1})),
где третий аргумент функций
$\mathbf{c},c_1,\,\ldots,c_N$
соответствовал $K$ в (\ref{4.2.2}).
Всюду в дальнейшем мы следуем данной интерпретации функций в (\ref{4.2.1}).
Если теперь (см. (\ref{3.3.15}))
у нас выбраны маршрут $\al\in \bbp$ и трасса
$(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al,$
то при $s\in \ov{1,N}$
в виде
\bfn
  \label{4.2.3}
  \mathbf{c}\bigl(\mathrm{pr}_2(z_{s-1}),\mathrm{pr}_1(z_s),\{\al(t):\,t\in \ov{s,N}\}\bigl)
  \in [0,\infty[, c_{\al(s)}\bigl(z_s, \{\al(t):\,t\in \ov{s,N}\}\bigl)\in [0,\infty[
\efn
реализуются конкретные  оценки затрат (потерь),
связанных с перемещением
$$
  \mathrm{pr}_2(z_{s-1}) \longrightarrow \mathrm{pr}_1(z_s)
$$
и работами,
определяемыми упорядоченной парой
$$
  z_s = \bigl(\mathrm{pr}_1(z_s),\mathrm{pr}_2(z_s)\bigl)
$$
и связанными с посещением мегаполиса $M_{\al(s)}.$
Величины (\ref{4.2.3})
суммируются  и, с добавлением слагаемого
$$
  f\bigl(\mathrm{pr}_2(z_N)\bigl)\in [0,\infty[
  ,
$$
определяют стоимость решения
$\bigl(\al,(z_i)_{i\in\ov{0,N}}\bigl).$
Напомним, что всюду в дальнейшем множество ДР отождествляется с
$\widetilde{\mathbf{D}}$
(\ref{3.3.27}),
которое непусто и конечно.

Если
$\al\in \bbp$ и
$(z_i)_{i\in\ov{0,N}}\in \bbz,$
то полагаем, что
\begin{eqnarray}
  &\mathfrak{B}_\al [(z_i)_{i\in\ov{0,N}}] \df \sum\limits_{s=1}^N
  \bigl[\mathbf{c}\bigl(\mathrm{pr}_2(z_{s-1}),\mathrm{pr}_1(z_s),\{\al(t):\,
  t\in \ov{s,N}\}\bigl) +
  &\nonumber\\
  &+  c_{\al(s)}\bigl(z_s,\{\al(t):\,t\in \ov{s,N}\}\bigl)\bigl)\bigl] +
  f\bigl(\mathrm{pr}_2(z_N)\bigl)
  ,
  &
  \label{4.2.4}
\end{eqnarray}
получая неотрицательное число.
Значение (\ref{4.2.4})
существенно в последующих построениях при
$$
  \al\in \mathbf{A},\, (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al
  ,
$$
то есть при
$\bigl(\al,(z_i)_{i\in\ov{0,N}}\bigl)\in \widetilde{\mathbf{D}}.$
В качестве обобщенного аналога (\ref{3.3.34})
рассматриваем задачу
\bfn
  \label{4.2.5}
  \mathfrak{B}_\al[(z_i)_{i\in\ov{0,N}}]\longrightarrow \min,\,\al\in \mathbf{A},\,
  (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al
  .
\efn

Ограничения задачи (\ref{4.2.5}) совместны,
а потому определены значение
(экстремум)
\bfn
  \label{4.2.6}
  \mathbb{V} \df \min\limits_{\al\in \mathbf{A}}\
  \min\limits_{(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al}
  \mathfrak{B}_\al[(z_i)_{i\in\ov{0,N}}]\in [0,\infty[
\efn
и непустое множество оптимальных ДР.
Заметим, что ДР
\bfn
  \label{4.2.7}
  \bigl(\al^o,(z_i^o)_{i\in\ov{0,N}}\bigl)\in \widetilde{\mathbf{D}}
\efn
оптимально тогда и только тогда, когда
\bfn
  \label{4.2.8}
  \mathfrak{B}_{\al^o}[(z_i^o)_{i\in\ov{0,N}}]\leqslant \mathfrak{B}_\al
  [(z_i)_{i\in\ov{0,N}}]\ \ \fa \al\in \mathbf{A}\ \ \fa
  (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al
  .
\efn

Мы ставим своей целью нахождение значения $\mathbb{V}$
и какого-либо оптимального ДР.
Разумеется, для каждого ДР (\ref{4.2.7})
со свойством (\ref{4.2.8}) справедливо равенство
$$
  \mathfrak{B}_{\al^o}[(z_i^o)_{i\in\ov{0,N}}]  = \mathbb{V}
  .
$$

Отметим, что в (\ref{4.2.5}) мы имеем очень сложную задачу,
для эффективного решения которой следует разрабатывать эвристические методы,
учитывая проблемы, связанные с размерностью.
Тем не менее важно также
иметь представление о структуре оптимальных решений,
в связи с чем в следующем разделе будет рассмотрена схема широко понимаемого ДП
(подробнее см. в \cite{Cha3`,Cha11`,Cha12`}).
