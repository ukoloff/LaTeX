% !TeX root = ../mat_mod2.tex

\section{
  Построение эвристик на базе ДП
}
\label{sect:3.6}
\setcounter{equation}{0}

Оптимальная процедура, изложенная в разделе 3.5 для решения основной
задачи (\ref{3.3.31}),
сопряжена с серьезными  трудностями вычислительного
характера и в своем
непосредственном виде может быть применена только для
решения конкретных задач умеренной размерности.
Если же говорить о решении
<<больших>> задач,
то такое (непосредственное) применение вышеупомянутой схемы
на основе ДП, как правило, невозможно
(по соображениям вычислительной сложности).
Можно наметить все же несколько вариантов использования ДП
для построения эвристических алгоритмов.

1. Рассмотрим совсем кратко подход, связанный со своеобразной <<дрессировкой>>
эвристик.
Итак, пусть мы располагаем набором
$\widetilde{\ca}_1,\,\ldots ,\widetilde{\ca}_n$
эффективных эвристических алгоритмов,
позволяющих каждый раз находить ДР основной задачи за приемлемое
время.
Тогда на  вариантах задачи умеренной размерности, позволяющих определять
оптимальное ДР по методу ДП
(по весьма грубым оценкам это соответствует ситуации,
когда $N \approx 30$ и $|\mathbf{K}|\approx 27),$
предлагается сравнить каждый из алгоритмов
$\widetilde{\ca}_1,\ldots ,\widetilde{\ca}_n$
с оптимальным
(конструируемым на основе ДП)
и на основе данного сравнения
(при достаточно представительной статистике)
выбрать алгоритм
$\widetilde{\ca}_k,$ где $k\in \ov{1,n},$
который бы меньше всего проигрывал в качестве оптимальному.

Вполне возможно, что такого универсального алгоритма
$\widetilde{\ca}_k$
не найдется.
Тогда имеет смысл осуществлять сравнение для того или иного
типа задач,
используя обширный вычислительный эксперимент.
Так или иначе можно надеяться, что
на пробных задачах умеренной размерности
удастся
отобрать один или несколько эффективных алгоритмов,
которые
(по нашим представлениям)
будут годиться
для целей решения маршрутных
задач большой размерности.
При данном подходе аппарату на основе ДП отводятся
по сути дела контрольные функции.

2. Другой подход к применению ДП можно связать с построением вставок, улучшающих
качество эвристических решений.
Обсудим данный подход на идейном уровне.

Предположим, что мы располагаем задачей маршрутизации раздела 3,
размерность
которой не позволяет использовать в непосредственном виде аппарат ДП.
Тем не
менее, имеются эвристические  алгоритмы, которые
при безусловном соблюдении ограничений
позволяют находить ДР за приемлемое время.
Таким, в частности,
является жадный алгоритм, подобный по своей структуре рассмотренному в
\cite{Cha8`}.
С помощью такого алгоритма может быть сформировано начальное
решение в виде пары маршрут-трасса
(имеется в виду решение исходной <<большой>> задачи).
По мере реализации данного решения возникают фрагменты,
неудачные с
точки зрения <<глобального>> качества.
Тогда предлагается выбрать фрагмент
умеренной
(с точки зрения возможности применения ДП)
размерности и <<заменить>>
его локальным решением, конструируемым посредством применения специального
оптимизационного блока.
Данная операция выполняется так,
чтобы при этом не было
нарушено свойство допустимости исходного решения
в смысле ограничений <<большой>>
задачи и, прежде всего, в смысле <<глобальных>> условий предшествования.
Кроме
того, следует позаботиться о том, чтобы вклеиваемое локальное решение не ухудшало
качества тех <<частей>> исходного решения,
которые лежат за пределами оптимизируемого фрагмента.

Конечно, скорее всего однократное вмешательство упомянутого типа обеспечит лишь
незначительное улучшение,
но такое вмешательство можно применять в режиме улучшающих,
или лучше сказать -- неухудшающих итераций.
Многократное воздействие в
виде последовательно конструируемых вставок может,
как показывает вычислительный эксперимент,
ощутимым образом
улучшать качество решения задачи.

В этой связи отметим, что в задачах,
подобных (\ref{3.3.31}) и (\ref{3.3.34}),
обеспечение вышеупомянутых свойств,
касающихся реализации улучшающей (неухудшающей)
вставки, требует теоретического исследования,
касающегося сохранения допустимости
решения, неухудшения качества на внешних
(по отношению к оптимизируемому)
его фрагментах.
В частности, ограничения, порождаемые отображениями (\ref{3.3.9}),
приводят при построении беллмановских вставок
к затруднениям в части упомянутого
сохранения допустимости и, по этой причине
при рассмотрении
конструкции на основе вставок
мы ограничимся,
случаем задачи (\ref{3.3.34}),
которую
усложним, допуская далее к рассмотрению функции стоимости,
зависящие от списка заданий
(имеется в виду усложнение первых $N+1$ функций в (\ref{3.3.29})).

Однако, необхоимо иметь в виду,
что (\ref{3.3.34}) может рассматриваться как частный
случай задачи (\ref{3.3.31}),
отвечающий ситуации, когда
\bfn
  \label{3.6.1}
  A_j(x) = M_j\ \ \fa j\in \ov{1,N}\ \ \fa x\in \mathbf{X}
  .
\efn

Рассмотрим данный вопрос подробнее,
полагая условие
(\ref{3.6.1}).
выполненным.
Тогда согласно (\ref{3.3.2})
\bfn
  \label{3.6.1`}
  \mathrm{pr}_1(z) \in M_j\ \ \fa j\in\ov{1,N}\ \ \fa z\in \bbm_j
  .
\efn
Из (\ref{3.3.13}) и (\ref{3.6.1})
имеем следующее свойство:
\bfn
  \label{3.6.2}
  \bba_j(x) = \bbm_j\ \ \fa j\in \ov{1,N}\ \ \fa x\in \mathbf{X}
  .
\efn

Теперь отметим, что
$\mathbf{Z}_\al\su \bbz$
при $\al\in\bbp.$
Тогда при
$\al\in \bbp,\, (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al$
и $s\in \ov{0,N}$  имеем
$\mathrm{pr}_2(z_s)\in \mathbf{X}.$
Как следствие при упомянутых условиях для
$\al$ и $(z_i)_{i\in\ov{0,N}}$
\bfn
  \label{3.6.3}
  A_{\al(t)}\bigl(\mathrm{pr}_2(z_{t-1})\bigl) = M_{\al(t)}\ \
  \fa t\in \ov{1,N}
  .
\efn

Фиксируем в целях краткости в обозначениях
$\al\in \bbp$
и $(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al.$
Тогда при
$s\in \ov{1,N}$
в силу (\ref{3.3.15}) и (\ref{3.6.3})
получаем
\bfn
  \label{3.6.4}
  \mathrm{pr}_1(z_s) \in A_{\al(s)}\bigl(\mathrm{pr}_2(z_{s-1})\bigl)
  ,
\efn
где учтено (\ref{3.6.1}) и (\ref{3.6.3}).
Поскольку выбор $s$ был произвольным,
то в силу (\ref{3.3.16}) и (\ref{3.6.4})
имеем
\bfn
  \label{3.6.5}
  (z_i)_{i\in\ov{0,N}}\in \cz_\al
  .
\efn

Однако и выбор
$(z_i)_{i\in\ov{0,N}}$
был произвольным, а потому из
(\ref{3.6.5}) следует вложение
\bfn
  \label{3.6.6}
  \mathbf{Z}_\al\su \cz_\al
  .
\efn

Из (\ref{3.3.16}) и (\ref{3.6.6})
получаем равенство
$\mathbf{Z}_\al = \cz_\al$
(в рассматриваемом случае (\ref{3.6.1})).
В связи с тем, что
и выбор $\al$ был произвольным,
мы получили  важное свойство совпадения
<<одноименных>> пучков траекторий (трасс).
Точнее
\bfn
  \label{3.6.7}
  \cz_\al = \mathbf{Z}_\al\ \ \fa \al\in \bbp
  .
\efn

В частности,
$\cz_\al = \mathbf{Z}_\al$ при $\al\in \mathbf{A}$
(см. (\ref{3.3.24}), (\ref{3.3.25})).
Но в этом случае задачи (\ref{3.3.31}) и
(\ref{3.3.34}) отождествимы.
Тогда
\bfn
  \label{3.6.8}
  V = \widetilde{V}
  ,
\efn
а свойства оптимальности ДР задач
(\ref{3.3.31}) и (\ref{3.3.34}) совпадают
(см. (\ref{3.3.33}), (\ref{3.3.36}), (\ref{3.6.7})).
Итак, при условии
(\ref{3.6.1})
мы действительно свели задачу (\ref{3.3.34}) к варианту задачи
(\ref{3.3.31}).

Используя полученные данные,
мы рассмотрим нужную конкретизацию метода ДП,
отвечающую соглашению (\ref{3.6.1}).
Итак, в нашем случае (\ref{3.6.1})
согласно (\ref{3.3.35}) и (\ref{3.6.8})
\bfn
  \label{3.6.9}
  V = \min\limits_{\al\in \mathbf{A}}\
  \min\limits_{(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al} \mathfrak{C}_\al[(z_i)_{i\in\ov{0,N}}]
\efn
есть глобальный экстремум.
Далее заметим, что подобно (\ref{3.6.7}) можно
ввести надлежащую конкретизацию пучков траекторий, определяемых в (\ref{3.4.10}).
Для этого учтем,
что согласно (\ref{3.4.8`}), (\ref{3.4.9}) и (\ref{3.6.1}) при
$x\in \mathbf{X}, K\in \mathfrak{N}, \al\in (\mathrm{bi})[K],
(z_i)_{i\in\ov{0,|K|}}\in \mathbf{Z}(x,K,\al)$
и $t\in \ov{1,|K|}$
$$
  A_{\al(t)}\bigl(\mathrm{pr}_2(z_{t-1})\bigl) = M_{\al(t)}
  ,
$$
как следствие,
$\mathrm{pr}_1(z_t)\in A_{\al(t)}\bigl(\mathrm{pr}_2(z_{t-1})\bigl);$
см. (\ref{3.3.2}).
В этом случае,
согласно (\ref{3.4.10})
\bfn
  \label{3.6.10}
  \mathbf{Z}(x,K,\al) = \cz(x,K,\al)\in \mathrm{Fin}(\bbz_K)\ \
  \fa x\in \mathbf{X}\ \ \fa K\in \mathfrak{N}\ \ \fa \al\in (\mathrm{bi})[K]
  .
\efn

Данное свойство (\ref{3.6.10}) подобно (\ref{3.6.7}).
Из (\ref{3.4.24}) и
(\ref{3.6.10}) получаем в рассматриваемом случае,
что при $x\in \mathbf{X}$ и
$K\in \mathfrak{N}$
\bfn
  \label{3.6.11}
  v(x,K) = \min\limits_{\al\in (\mathbf{I}-\mathrm{bi})[K]}\ \
  \min\limits_{(z_i)_{i\in\ov{0,|K|}}\in \mathbf{Z}(x,K,\al)}
  \widehat{\mathfrak{C}}_\al[(z_i)_{i\in\ov{0,|K|}}|\,K]\in [0,\infty[
\efn
(учитываем наряду с (\ref{3.6.10}) также и (\ref{3.4.6})).
Сохраняя (\ref{3.4.25}),
получаем в (\ref{3.6.11}) нужную конкретизацию функции
(\ref{3.4.26}) со свойством (\ref{3.4.27}).
При этом, конечно, в (\ref{3.6.11})
можно рассматривать случай
$x=x^o$ и $K = \ov{1,N}.$
Теперь с учетом (\ref{3.4.7})
и (\ref{3.4.15}) имеем совпадение
$\widetilde{V}$ и
$v(x^o,\ov{1,N}):\, V= \widetilde{V}= v(x^o,\ov{1,N}).$
Далее из предложения~\ref{p3.5.1}  и
(\ref{3.6.2})
получаем при
$s\in \ov{1,N}$
требуемый вариант  трансформации
функции $v_{s-1}$ в $v_s:$
\bfn
  \label{3.6.12}
  v_s(x,K) = \min\limits_{j\in \mathbf{I}(K)}\
  \min\limits_{z\in \bbm_j}\bigl[\mathbf{c}\bigl(x,\mathrm{pr}_1(z)\bigl) +
  c_j(z) + v_{s-1}\bigl(\mathrm{pr}_2(z),K\sm\{j\}\bigl)]\bigl]\ \ \fa (x,K)
  \in D_s
  .
\efn

В (\ref{3.6.12}) следует учитывать вытекающую из (\ref{3.6.2})
конкретизацию (\ref{3.5.16}):
\bfn
  \label{3.6.13}
  \bigl(\mathrm{pr}_2(z), K\sm\{j\}\bigl)\in D_{s-1}\ \
  \fa s\in \ov{1,N}\ \ \fa (x,K)\in D_s\ \ \fa j\in \mathbf{I}(K)\ \ \fa z\in
  \bbm_j
  .
\efn

С использованием (\ref{3.6.12}) и (\ref{3.6.13})
получаем частный случай процедуры (\ref{3.5.22}),
отвечающий варианту (\ref{3.6.1}).
Отметим дополнительно, что для этого варианта
$$
  V = v_N(x^o,\ov{1,N}) = \min\limits_{j\in \mathbf{I}(\ov{1,N})}\
  \min\limits_{z\in \bbm_j}\bigl[\mathbf{c}(x^o,\mathrm{pr}_1(z)\bigl) +
  c_j(z) + v_{N-1}\bigl(\mathrm{pr}_2(z),\ov{1,N}\sm\{j\}\bigl)\bigl]
  .
$$
