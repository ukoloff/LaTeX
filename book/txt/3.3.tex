% !TeX root = ..

\section{
  Общая постановка задачи;
  объект исследования и некоторые характерные ограничения
}
\label{sect:3.3}
\setcounter{equation}{0}

Рассматриваем непустое множество $X$,
которое в конкретной постановке будет обычно
отождествляться с плоскостью либо с прямоугольником на плоскости.
Фиксируем натуральное число
$N\in \bbn, N \geqslant 2,$
а также $N$
(непустых конечных)
множеств
\bfn
  \label{3.3.1}
  M_1\in \mathrm{Fin}(X),\ldots,M_N\in \mathrm{Fin}(X),
\efn
именуемых в дальнейшем мегаполисами.
Кроме того, фиксируем (непустые) отношения
\bfn
  \label{3.3.2}
  \bbm_1\in \cp^\prime(M_1 \times M_1),\ldots,\bbm_N\in
  \cp^\prime(M_N\times M_N),
\efn
характеризующие возможности исполнителя в части выполнения работ в каждом
из упомянутых мегаполисов.
Итак,
$\bbm_1,\,\ldots,\bbm_N$ --- непустые множества
и при этом
$$
  \bbm_1\subset M_1\times M_1,\ldots,\bbm_N\subset M_N\times M_N.
$$

С каждым из отношений (\ref{3.3.2})
связываем множество вторых компонент
упорядоченных пар --- элементов данного отношения:
\bfn
  \label{3.3.3}
  \mathbf{M}_j \df \{\mathrm{pr}_2(z):\, z\in \bbm_j\}\in
  \cp^\prime(M_j)\ \ \fa j\in \ov{1,N}.
\efn

Пусть
$x^o\in X$
есть точка, именуемая базой и определяющая
начало процесса маршрутизации.
Будем предполагать, что
\bfn
  \label{3.3.4}
  (x^o\notin M_j\ \ \fa j\in \ov{1,N})\,\&\,(M_p \cap\,M_q =
  \emp\ \ \fa p\in \ov{1,N}\ \ \fa q\in \ov{1,N}\setminus \{p\})
\efn
В (\ref{3.3.4}) имеем условия, типичные для задач маршрутизации.
Введем также
\bfn
  \label{3.3.5}
  \mathbb{X} \df \{x^o\} \cup \Bigl(\bigcup\limits_{i=1}^N
  M_i\Bigl)\in \mathrm{Fin}(X), \ \mathbf{X}\df \{x^o\} \cup
  \Bigl(\bigcup\limits_{i=1}^N \mathbf{M}_i\Bigl)\in \mathrm{Fin}(\bbx).
\efn

\begin{zam}
\label{z3.3.1}
Обсудим нужный в дальнейшем вариант $(\ref{3.3.1})$---$(\ref{3.3.5})$,
где
$X = \bbr \times \bbr$ (плоскость).
Полагаем, что в $X$ размещены заготовки деталей
(для краткости будем называть их деталями)
$\mathbf{D}_1,\,
\ldots,\mathbf{D}_n,$
где
$n\in \mathbb{N}, 2\leqslant n.$
При этом
$$
  \mathbf{D}_1\su \bbr \times \bbr,
  \,\ldots,
  \mathbf{D}_n\su \bbr \times \bbr.
$$
Каждое из множеств
$\mathbf{D}_1,\,\ldots,\mathbf{D}_n$
считаем непустым,
ограниченным, замкнутым и телесным
(имеющим внутренние точки).
Если
$j\in \ov{1,n},$
то сопоставляем детали $\mathbf{D}_j$ ее границу
$\Gamma_j,$
полагая, что она получается объединением непересекающихся непустых,
ограниченных и замкнутых множеств
$\Gamma_{j,1},\,\ldots,\Gamma_{j,\bmn_j},$
где $\bmn_j\in \bbn$.
Каждое из множеств
$\Gamma_{j,k}, k\in \ov{1,\bmn_j}$
является в данном построении замкнутой кривой,
соответствующей либо внешнему,
либо одному из внутренних контуров,
ограничивающих деталь
$\mathbf{D}_j.$ Итак,
$$
  \Gamma_j = \bigcup\limits_{k=1}^{\bmn_j} \Gamma_{j,k}\ \ \fa j\in \ov{1,n}.
$$

Внешний контур каждой детали полагаем выделенным,
он соответствует завершению резки детали.

Примем, что возле каждого контура
$\Gamma_{j,k}, j\in \ov{1,n},\ k\in \ov{1,\bmn_j}$
имеется замкнутая кривая --- эквидистанта
$\Om_{j,k},$ расположенная с внешней
(по отношению к контуру)
стороны и не пересекающаяся с $\mathbf{D}_j$.
Предположим, что
$\Gamma_{j,k}$ и $\Om_{j,k}$ близки.
Эквидистанта
(по большому счету)
копирует контур и создается
(см. первую часть)
для осуществления определенного  запаса на резку по
данному контуру. Разумеется,
$$
  \Om_{j,k} \cap \mathbf{D}_j = \emp\ \
  \fa j\in \ov{1,n}\ \
  \fa k\in \ov{1,\bmn_j}.
$$

Условимся,
что каждое из множеств
$\Om_{j,k}, j\in\ov{1,n},\ k\in\ov{1,\bmn_j}$
непусто, ограничено и замкнуто.
Пусть
(в данном рассуждении)
\bfn
  \label{3.3.6}
  N \df \sum\limits_{j=1}^n\bmn_j.
\efn

Теперь мы нумеруем все эквидистанты подряд, используя в качестве индексов числа из
$\ov{1,N}$
(более подробно это излагается далее).
Тогда
$N \hm \in \bbn, N \geqslant 2$,
число $N$ определяет фактическую размерность задачи.
С каждым значением
$j\in \ov{1,N}$
у нас теперь связана эквидистанта контура некоторой детали.
Мы рассматриваем далее всю совокупность эквидистант
\bfn
  \label{3.3.7}
  \Om_{1,1},\,\ldots,\Om_{1,\bmn_1},
  \Om_{2,1},\,\ldots,\Om_{2,\bmn_2},
  \,\ldots,
  \Om_{n,1},\,\ldots,\Om_{n,\bmn_n}.
\efn

Их теперь целесообразно, как уже отмечалось, занумеровать подряд, получая систему
\bfn
  \label{3.3.8}
  \Om^{(1)},\,\ldots,\Om^{(N)}
  ,
\efn
учитывая
$(\ref{3.3.6})$ и $(\ref{3.3.7})$.
Теперь возле каждого из множеств
(замкнутых кривых)
$\Om^{(j)}$ в $(\ref{3.3.8})$
размещаем мегаполис $M_j,$
точки которого --- точки врезки и выключения инструмента --- сгруппированы в пары
(при этом, точки врезки и выключения инструмента в совокупности,
составляющие $M_j,$
располагаются с внешней по отношению к $\Om^{(j)}$ стороны в следующем порядке:
для индексов
$s\in \ov{1,n}$ и $t\in \ov{1,\bmn_s}$
со свойством $\Om^{(j)} = \Om_{s,t}$
упомянутые точки располагаются с внешней
стороны детали
$\mathbf{D}_s$ стороны по
отношению к $\Om_{s,t})$.
С этих пор мы, в принципе, можем <<забыть>> о самих деталях
и рассматривать эквидистанты и <<привязанные>> к ним мегаполисы
(последние также играют
роль дискретизированных эквидистант,
а точнее -- эквидистант второго уровня).

Следует, однако, учесть,
что при любом варианте маршрутизации длины проходимых
инструментом эквидистант $(\ref{3.3.8})$
не изменяются, остаются одними и теми же.
Если иметь в виду оптимизацию времени исполнения всех операций,
то суммарное время
резки эквидистант является общей константой,
а потому может не учитываться  при
построении аддитивного критерия задачи на быстродействие.

Сумма стоимостей внешних перемещений составляет время холостого хода;
которое пропорционально пройденному расстоянию.
По этой причине мы можем рассматривать
здесь метрический
(точнее, евклидов) вариант задачи.

В то же время продвижения от точки врезки к эквидистанте и далее
по окончанию резки по данной эквидистанте
к точке выключения инструмента, осуществляемые в металле,
могут вносить ощутимый вклад в значение совокупного критерия,
так как они осуществляются <<в медленном времени>>.

Заметим, что замена (при $j\in \ov{1,N})$ эквидистант $\Om^{(j)}$
мегаполисами
$M_j$
мотивируется соображениями, связанными с <<безопасным>> осуществлением врезки,
и касающимися вычислительной реализации
(имеется в виду построение локальных задач переборного типа).
Разделяя эти два обстоятельства,
можно было бы на идейном уровне говорить и о второй,
более удаленной от контура, эквидистанте,
дискретизацию которой реализует соответствующий мегаполис.
\hfill $\Box$
\end{zam}

Возвращаясь к общим построениям,
связанным с (\ref{3.3.5}),
будем полагать, что
у нас имеются ограничения, связанные с вопросом достижимости извне городов
мегаполиса
(городами в нашей интерпретации являются точки множеств (\ref{3.3.1})).

Конечно,  на макроуровне нашей постановки речь идет о перемещениях вида
\bfn
  \label{3.3.8`}
  \begin{array}{c}
    (x_o = x^o) \rightarrow (x_{1,1}\in M_{\al(1)} \rightsquigarrow
    x_{1,2}\in M_{\al(1)})\rightarrow \ldots \\  \rightarrow(x_{N,1}\in M_{\al(N)}
    \rightsquigarrow x_{N,2}\in M_{\al(N)})
  \end{array}
\efn
при условиях
\bfn
  \label{3.3.8``}
  (x_{1,1},x_{1,2})\in \bbm_{\al(1)},\,\ldots,(x_{N,1},x_{N,2})\in \bbm_{\al(N)},
\efn
где
$\al$ --- перестановка  индексов из $\ov{1,N},$
выбор которой может быть стеснен
условиями предшествования.
Перестановка $\al,$ а также <<города>>
$x_{1,1}$, $x_{1,2}$,
\ldots,$x_{N,1}$,$x_{N,2}$
выбираются исследователем с целью оптимизации критерия качества,
который будет определен ниже.
Условия
(\ref{3.3.8`}), (\ref{3.3.8``})
дополняется и некоторыми
другими ограничениями, связанными, в частности, с внешними перемещениями
$$
  x^o\longrightarrow x_{1,1},\, x_{1,2} \longrightarrow x_{2,1},\,\ldots,x_{N-1,2}
  \longrightarrow x_{N,1}
$$
(имеется в виду случай $N>3)$.
В этой связи, следуя \cite{Cha3`},
фиксируем отображения
\bfn
  \label{3.3.9}
  A_1:\,\mathbf{X}\longrightarrow \cp^\prime(M_1),\ldots,A_N:\,
  \mathbf{X}\longrightarrow \cp^\prime(M_N)
  ,
\efn
именуемые далее мультифункциями.
Согласно (\ref{3.3.9})
при
$x\in \mathbf{X}$ и $t\in \ov{1,N}$
в виде $A_t(x)$
имеем непустое п/м $M_t$
(то есть $A_t(x)\su M_t),$
интерпретируемое как своеобразная область достижимости
точек $M_t$
(то есть городов в $M_t)$
из состояния $x.$
Полагаем при этом, что точки
множества $A_t(x)$
и только они достижимы в мегаполисе
$M_t$ из состояния $x.$

\begin{zam}
  \label{z3.3.2}
Обсудим одну естественную конкретизацию $(\ref{3.3.9})$:
будем рассматривать
требование, состоящее в том, чтобы новая точка врезки отстояла <<достаточно далеко>>
от предыдущей.
Сделаем это сначала на идейном уровне,
полагая в условиях замечания~$\ref{z3.3.1}$,
что при $s\in \ov{1,N}$ и $x\in \mathbf{X}\sm M_s$
множество $A_s(x)$ определяется правилом
\bfn
  \label{3.3.10}
  A_s(x) \df \{\mathrm{pr}_1(z):\,z\in \bbm_s\
  d_s -\eps_s\leqslant\rho\bigl(x,\mathrm{pr}_1(z)\bigl)\},
\efn
где $\eps_s\in [0,\infty[$ --- параметр точности, а
$$
  d_s = \max\limits_{h\in \bbm_s}\rho\bigl(x,\mathrm{pr}_1(h)\bigl).
$$

Здесь
$\rho= \rho(\cdot,\cdot)$ --- обычное евклидово расстояние на
плоскости.
Заметим, что с практической точки зрения $(\ref{3.3.10})$
представляет интерес в случае, когда
$x = \mathrm{pr}_2(z),$
где $z\in \bbm_j$ при
$j\in \ov{1,N}\sm \{s\}.$
Поскольку в этом случае $\mathrm{pr}_1(z)\approx \mathrm{pr}_2(z),$
конструкция $(\ref{3.3.10})$
реализует (в некоторой степени) идею достаточного
<<удаления>> новой точки врезки от предыдущей.
По самому смыслу задачи
рассматриваемый случай $j$ отвечает той ситуации,
когда на соответствующем маршруте
индекс $j$ непосредственно предшествует $s.$

При практической реализации возможны различные модификации правила $(\ref{3.3.10})$.
Эти модификации будут использоваться и отдельно оговариваться при компьютерном
моделировании.
В общих построениях каких-либо дополнительных существенных ограничений
на $(\ref{3.3.9})$ накладываться не будет,
что собственно и позволяет конструировать
данные мультифункции <<под задачу>>.
\hfill $\Box$
\end{zam}

Примем
в дальнейшем выполненными некоторые естественные условия,
позволяющие <<встраивать>> множества --- значения отображений (\ref{3.3.9}) ---
в схемы перемещений между:
1) базой и мегаполисами,
2) между самими мегаполисами.
Итак, предроложим далее, что
\bfn
  \label{3.3.11}
  \fa j\in\ov{1,N}\ \ \fa x \in \mathbf{X}\ \exists\, z\in
  \bbm_j:\,\mathrm{pr}_1(z)\in A_j(x).
\efn

В (\ref{3.3.11}) на первый взгляд имеется некоторая избыточность:
при $j \hm \in\ov{1,N}$
допускается рассмотрение перемещений из
$x\in \mathbf{M}_j$ в точки
(то есть в <<города>>)
из множества $\{\mathrm{pr}_1(z);\, z\in \bbm_j\},$
что никогда не будет возникать при реализации процесса последовательного обхода мегаполисов.
Допустим,
что значения операторов (\ref{3.3.9})
содержательны лишь в
ситуациях, отвечающих перемещению из $x^o$ в какой-либо мегаполис и перемещениям
из одного мегаполиса в другой.
Нереализуемым в <<маршрутных>> решениях ситуациям,
когда при
$j\in \ov{1,N}$ и $x\in \mathbf{M}_j$
рассматривается перемещение снова
в точки мегаполиса $M_j,$ можно сопоставить в качестве значения
$A_j(x)$ оператора
$A_j$ все множество $M_j$ с тем,
чтобы формально удовлетворить условию (\ref{3.3.11}).

Таким образом, определяя значения операторов (\ref{3.3.9})
<<по настоящему>> для
ситуации перемещения из $x^o$ в мегаполисы и при перемещении из одного мегаполиса
в другой, во всех прочих (нереализуемых) случаях можно просто отождествить значение
соответствующего оператора с мегаполисом, имеющим тот же номер.
В итоге, если условия
(\ref{3.3.11}) будут выполнены в случае потенциально возможных перемещений, то
(при упомянутом способе доопределения)
они будут выполняться и для всевозможных
$j\in \ov{1,N}$ и $x\in \mathbf{X}.$

Всюду в дальнейшем полагаем (\ref{3.3.11}) выполненным,
имея в виду, что для
содержательных ситуаций, отвечающих
$j\in \ov{1,N}$ и $x\in \mathbf{X},$
значения
$A_j(x)$ <<правильно>> определены, а для всех прочих ситуаций соответствующие
значения <<достроены>> (доопределены) вышеупомянутым способом:
имеется в виду
вариант $A_j(x) = M_j$ при $x\in \mathbf{M}_j.$


Теперь, используя (\ref{3.3.11}),
можно ввести модификации мультифункций
(\ref{3.3.9}), отвечающие перемещениям из $\mathbf{X}$ в множества
$\bbm_1,\,\ldots,\bbm_N$ (\ref{3.3.2}).
Итак, введем в рассмотрение
мультифункции
\bfn
  \label{3.3.12}
  \bba_1:\,\mathbf{X}\longrightarrow \cp^\prime(\bbm_1),
  \,\ldots,\bba_N:\,\mathbf{X}\longrightarrow \cp^\prime(\bbm_N),
\efn
а именно:
при $j\in \ov{1,N}$ полагаем, что отображение
$$
  \bba_j:\,\mathbf{X}\longrightarrow \cp^\prime(\bbm_j)
$$
определяется условиями
\bfn
  \label{3.3.13}
  \bba_j(x) \df \{z\in \bbm_j |\,\mathrm{pr}_1(z) \in
  A_j(x)\}\ \ \fa x\in \mathbf{X}.
\efn

Из (\ref{3.3.11}) следует, что определения (\ref{3.3.12}), (\ref{3.3.13})
корректны:
мы действительно получаем отображения, значениями которых
являются непустые множества.

Условимся через $\bbp$ обозначать множество всех перестановок индексов из
$\ov{1,N}:\,\bbp \df (\mathrm{bi})[\ov{1,N}],\, \bbp \neq \emp.$
Элементы множества $\bbp$ именуем (полными) маршрутами.
В частности,
при $\al\in \bbp$ имеем
$$
  \al(1)\in \ov{1,N},\ldots,\al(N) \in \ov{1,N}.
$$

{\bf Трассы, согласованные с маршрутами.}
С учетом (\ref{3.3.8`}) и
(\ref{3.3.8``}) логично связывать с каждым маршрутом из $\bbp$ соответствующий
кортеж упорядоченных пар, имеющий <<длину>> $N.$
Сделать это можно разными способами,
а потому будем говорить о множестве таких кортежей.
Более того,
в определении данного множества будут учтены дополнительные ограничения,
связанные с мультифункциями (\ref{3.3.12}), (\ref{3.3.13}).

Условимся сначала о следующем соглашении:
через $\bbz$ обозначаем в дальнейшем
множество всех кортежей
\bfn
  \label{3.3.14}
  (z_i)_{i\in\ov{0,N}}:\,\ov{0,N}
  \longrightarrow \bbx\times \mathbf{X}
  .
\efn

Кортежи (\ref{3.3.14}) являются,
строго говоря,
отображениями из
$\ov{0,N} \hm = \{l\in \bbn_o |\,l\leqslant N\}$
в декартово произведение $\bbx\times \mathbf{X}$
множеств $\bbx$ и $\mathbf{X};$
при $j\in \ov{0,N}$ упорядоченная пара
$z_j\in \bbx\times \mathbf{X}$
есть всякий раз значение соответствующего отображения в
точке $j.$

Если
$\al\in \bbp,$
то полагаем в дальнейшем, что
\bfn
  \label{3.3.15}
  \mathbf{Z}_\al \df \{(z_i)_{i\in\ov{0,N}}\in \bbz |\,\bigl(z_o =
  (x^o,x^o)\bigl)\,\&\,(z_t\in \bbm_{\al(t)}\ \ \fa t\in \ov{1,N})\}
  ,
\efn
получая некоторое предваряющее определение
(впрочем, в целом ряде частных случаев
оно будет достаточным для наших построений).
Заметим в связи с (\ref{3.3.15}),
что при
$\al\in \bbp, (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al$ и $j\in \ov{1,N}$
имеем, в частности, согласно (\ref{3.3.3}) и (\ref{3.3.5}),
что
$\mathrm{pr}_2(z_{j-1})\in \mathbf{X},$
а потому (см. (\ref{3.3.9})) определено непустое множество
$A_{\al(j)} \bigl(\mathrm{pr}_2(z_{j-1})\bigl)$:
$$
  A_{\al(j)}\bigl(\mathrm{pr}_2(z_{j-1})\bigl)\su M_{\al(j)}.
$$

С учетом этого полагаем теперь, что
\bfn
  \label{3.3.16}
  \cz_\al \df \{(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al |\,
  \mathrm{pr}_1(z_s)\in  A_{\al(s)}\bigl(\mathrm{pr}_2(z_{s-1})\bigl)\ \ \fa
  s\in \ov{1,N}\}\ \ \fa \al\in \bbp.
\efn

Заметим, что из \cite[(3.21)]{Cha3`}
легко извлекается свойство
\bfn
  \label{3.3.17}
  \cz_\al\neq \emp\ \ \fa \al\in \bbp
\efn

В этой связи в силу \cite[(3.5)--(3.7)]{Cha3`}
определение
$\cz_\al,$ где
$\al\in \bbp,$
данное в \cite[64]{Cha3`}, сводится к
(\ref{3.3.16}),
а тогда (\ref{3.3.17}) извлекается из
\cite[(3.21)]{Cha3`}.
С учетом (\ref{3.3.5}) имеем, что множество
$\bbx \times \mathbf{X}$ конечно,
а тогда конечно и множество $\bbz$
(декартова степень непустого конечного
множества).
Стало быть (см. (\ref{3.3.15})),
при $\al\in \bbp$ множество
(\ref{3.3.15}) также конечно, что приводит в силу (\ref{3.3.16})
к конечности каждого из множеств
$\cz_\al, \al\in \bbp.$
С учетом (\ref{3.3.17}) имеем, что
\bfn
  \label{3.3.18}
  \cz_\al\in \mathrm{Fin}(\mathbf{Z}_\al)\ \ \fa \al\in \bbp.
\efn

Из (\ref{3.3.15}) и (\ref{3.3.18}) вытекает в свою очередь, что
\bfn
  \label{3.3.19}
  \cz_\al\in \mathrm{Fin}(\bbz)\ \ \fa \al\in \bbp.
\efn

В силу (\ref{3.3.15}) и (\ref{3.3.17})
имеем свойство
$\mathbf{Z}_\al\neq \emp\ \ \fa \al\in \bbp.$
Это означает, что
\bfn
  \label{3.3.20}
  \mathbf{Z}_\al\in \mathrm{Fin}(\bbz)\ \ \fa \al\in \bbp
\efn
(конечность множеств (\ref{3.3.15}) уже отмечалась ранее).
Свойства (\ref{3.3.19}) и (\ref{3.3.20})
следуют на самом деле из \cite[(3.21)]{Cha3`}.
Итак, с каждым маршрутом $\al\in\bbp$
связывается непустое конечное множество
кортежей, определяемое в (\ref{3.3.16});
упомянутые кортежи называем трассами
или траекториями, согласованными с маршрутом $\al.$

{\bf Условия предшествования.}
В настоящем пункте мы подробно рассмотрим вопрос,
связанный с формализацией условий предшествования.
Речь идет об очень важном
варианте ограничений, который в задачах,
обсуждаемых в первой части, связан с
обеспечением следующих технологических условий:
для каждой детали резка внутренних
контуров должна предшествовать резке внешнего контура.
Аналогичное требование
предъявляется к резке <<вложенных>> деталей.

Заметим, что в других прикладных задачах условия предшествования могут иметь
иной содержательный смысл.
Так, в задачах о морских и авиационных перевозках
могут задаваться директивные условия перемещения грузов из одного пункта
(отправителя) в другой (получатель).
Соответственно такие упорядоченные пары
пунктов иногда называют адресными.
У каждой такой пары выделяют первый элемент
в качестве отправителя (груза, сообщения)
и второй элемент в качестве получателя.
Таким образом, в упомянутых задачах о перевозках речь идет о перемещении грузов в
направлении от отправителя к получателю,
причем допускаются и промежуточные пункты
(мы не ограничиваемся случаем немедленного перемещения в упомянутом направлении).

Поскольку в нашей общей постановке мегаполисы занумерованы биективно,
мы можем отождествлять отправителей и получателей с индексами из <<промежутка>>
$\ov{1,N}.$
Тогда адресные пары могут быть представлены в виде $(i,j),$
где $i\in \ov{1,N}$
и $j\in \ov{1,N}.$
В данной редакции условий предшествования должно быть введено
множество всех таких упорядоченных адресных пар $(i,j).$

Итак, фиксируем множество
$\mathbf{K}\in \cp(\ov{1,N}\times \ov{1,N}),$
(иными словами,
$\mathbf{K}$ есть множество, для которого
$\mathbf{K}\su \ov{1,N} \times \ov{1,N},$
то есть $\mathbf{K}$ состоит из упорядоченных пар вышеупомянутого типа).
Будем предполагать в дальнейшем, что
\bfn
  \label{3.3.21}
  \fa \mathbf{K}_o\in \cp^\prime(\mathbf{K})\ \ \exists\, z_o\in \mathbf{K}_o:\,
  \mathrm{pr}_1(z_o)\neq \mathrm{pr}_2(z)\ \ \fa z\in \mathbf{K}_o.
\efn

Свойство (\ref{3.3.21}) означает, что при всяком выборе непустого множества
$\mathbf{K}_o,\, \mathbf{K}_o\su \mathbf{K},$
в этом множестве всегда найдется
упорядоченная пара $z_o = (i_o,j_o),$
для которой при любом выборе упорядоченной пары
$z = (i,j)\in \mathbf{K}_o$
непременно $i_o \neq j.$
Условие (\ref{3.3.21})
(подобное обсуждение см. в \cite[часть~2]{Cha1`})
исключает зацикливание
$\mathbf{K}$-допустимых
(по предшествованию) маршрутов.
При этом сама
$\mathbf{K}$-допустимость маршрута
$\al\in \bbp$ состоит в следующем:
$\fa z \hm \in \mathbf{K}\ \ \fa t_1\in \ov{1,N}\ \ \fa t_2\in \ov{1,N}$
\bfn
  \label{3.3.22}
  \Bigl(\bigl(\al(t_1) = \mathrm{pr}_1(z)\bigl)\,\&\,
  \bigl(\al(t_2) = \mathrm{pr}_2(z)\bigl)\Bigl) \Longrightarrow (t_1 < t_2).
\efn

В \cite[часть~2]{Cha1`}
указано эквивалентное представление свойства
(\ref{3.3.22}),
использующее понятие обратной перестановки.
Итак, маршрут
$\al\in\bbp$ $\mathbf{K}$-допустим тогда и только тогда, когда
\bfn
  \label{3.3.23}
  \al^{-1}\bigl(\mathrm{pr}_1(z)\bigl) < \al^{-1}\bigl(\mathrm{pr}_2(z)\bigl)\ \
  \fa z\in \mathbf{K}.
\efn

В связи с (\ref{3.3.23}) отметим,
что при $\al\in \bbp$ и $z\in \mathbf{K}$
индексы
$t_1= \al^{-1}\bigl(\mathrm{pr}_1(z)\bigl)\in \ov{1,N}$ и
$t_2= \al^{-1}\bigl(\mathrm{pr}_2(z)\bigl)\in \ov{1,N}$
играют роль моментов времени, соответствующих посещению мегаполисов
$M_{\mathrm{pr}_1(z)}$ и $M_{\mathrm{pr}_2(z)}$ соответственно.
С учетом
упомянутой отождествимости условий,
связанных с (\ref{3.3.22}) и (\ref{3.3.23})
имеем, что
\bfn
  \label{3.3.24}
  \mathbf{A} \df \{\al\in \bbp|\,\al^{-1}\bigl(\mathrm{pr}_1(z)\bigl) <
  \al^{-1}\bigl(\mathrm{pr}_2(z)\bigl)\ \ \fa z\in \mathbf{K}\}
\efn
есть множество всех $\mathbf{K}$-допустимых маршрутов.
В \cite[часть~2]{Cha1`}
показано, что
(при условии (\ref{3.3.21}))
$\mathbf{A}\neq \emp.$
Поэтому
\bfn
  \label{3.3.25}
  \mathbf{A}\in \cp^\prime(\bbp),
\efn
то есть $\mathbf{A}$ есть непустое п/м $\bbp$,
в котором элементами являются
$\mathbf{K}$-допустимые
(по предшествованию)
маршруты и только они.

{\bf Допустимые решения.}
Упорядоченные пары
$$
  \bigl(\al,(z_i)_{i\in\ov{0,N}}\bigl), \al\in \mathbf{A},\,
  (z_i)_{i\in\ov{0,N}}\in \cz_\al
$$
рассматриваем в дальнейшем в качестве допустимых решений (ДР)
задачи о построении системы перемещений (\ref{3.3.8`}), (\ref{3.3.8``})
с нужными свойствами.
С учетом (\ref{3.3.19}) и (\ref{3.3.25})
имеем важное свойство
непустоты множества всех ДР.
Итак, получили, что
\bfn
  \label{3.3.26}
  \mathbf{D}\df \{\bigl(\al,(z_i)_{i\in\ov{0,N}}\bigl)\in
  \mathbf{A}\times \bbz\,\bigl| \,(z_i)_{i\in\ov{0,N}}\in \cz_\al\}\in
  \cp^\prime(\mathbf{A}\times \bbz).
\efn

В связи с (\ref{3.3.26})
необхоимо отметить, что
\bfn
  \label{3.3.27}
  \widetilde{\mathbf{D}} \df \{\bigl(\al,(z_i)_{i\in\ov{0,N}}
  \bigl)\in \mathbf{A}\times \bbz\,\bigl|\,(z_i)_{i\in\ov{0,N}}\in
  \mathbf{Z}_\al\}\in \cp^\prime(\mathbf{A}\times \bbz).
\efn

В (\ref{3.3.26}) мы имеем <<настоящее>> множество всех ДР,
причем здесь в понятие допустимости включается набор условий,
определяемых посредством мультифункций (\ref{3.3.9})
(в конкретизированной постановке
(см. замечание~\ref{z3.3.2})
это соответствует технологическому требованию,
связанному с достаточным удалением <<новой>> точки врезки от предыдущей).
В (\ref{3.3.27}) мы отказываемся от условий, связанных с (\ref{3.3.9}),
и создаем возможности для <<более свободного>> режима.
Сравнение результатов,
достигаемых в классах ДР из множеств (\ref{3.3.26}), (\ref{3.3.27}) может
оказаться полезным с точки зрения оценки влияния условий, касающихся
(\ref{3.3.9}), на окончательный результат.

{\bf Функции стоимости, агрегирование затрат.}
Мы полагаем, что внешние
перемещения и работы, связанные с посещением мегаполисов, сопровождаются
потерями, которые затем агрегируются.
В настоящей книге рассматривается
только аддитивный вариант агрегирования:
затраты суммируются.
В конкретной постановке, связанной с листовой резкой на машинах с ЧПУ оценивается общее
время холостого хода и некоторые операции, связанные с началом и
завершением резки.

Однако сейчас мы рассмотрим абстрактный вариант постановки,
а стало быть
и функции стоимости здесь могут быть достаточно произвольными.

По соображениям вычислительного характера мы <<сократим>>
исходное множество
состояний $X$ до конечного,
но достаточного для всех наших построений его п/м:
введем в рассмотрение (см. (\ref{3.3.5}))
\bfn
  \label{3.3.28}
  \bbx \df \{x^o\} \cup\Bigl(\bigcup\limits_{i=1}^NM_i\Bigl) \in \mathrm{Fin}(X).
\efn

Из (\ref{3.3.8`}) и (\ref{3.3.28}) видно, что все состояния
(определяемые как элементы $X),$
которые могут быть получены на реализациях исследуемого
процесса <<укладываются>> в $\bbx$ (\ref{3.3.28}).
С этих пор мы просто
<<заменяем>> $X$ на $\bbx,$
что будет учитываться и при определении функций стоимости.

Итак, на уровне общей постановки мы фиксируем
(произвольные) функции
\bfn
  \label{3.3.29}
  \mathbf{c}\in \mathcal{R}_+[\bbx\times \bbx],\ c_1\in
  \mathcal{R}_+[\bbx\times \bbx],
  \,\ldots,c_N\in \mathcal{R}_+[\bbx\times
  \bbx],\ f\in \mathcal{R}_+[\bbx].
\efn

Допустим, что значения этих функций содержательны на соответствующих п/м
областей определения, а для прочих аргументов они доопределяются тем или иным
способом.
Это особенно важно сделать в конкретной постановке.
В общем же случае
(\ref{3.3.29})  полагаем только, что функция $\mathbf{c}$
используется для оценивания внешних перемещений,
функции $c_1,\,\ldots,c_N$ --- для оценивания работ,
связанных с посещением мегаполисов,
а $f$ --- для оценивания терминального состояния (элемент
$x_{N,2}$
в (\ref{3.3.8`}), (\ref{3.3.8``})).

\begin{zam}
  \label{z3.3.3}
Из общих соображений, связанных с $(\ref{3.3.8`})$ и
$(\ref{3.3.8``})$ вытекает,
что значения $\mathbf{c}(x,y)$ функции $\mathbf{c}$
содержательны
$($и, по сути дела, достаточны для оценивания перемещений в
$(\ref{3.3.8`}), (\ref{3.3.8``}))$
в следующих двух случаях:

$1)\ x = x^o$ и $y\in A_j(x^o),$ где $j\in \ov{1,N};$

$2)\ x\in \mathbf{M}_k,$ где $k\in \ov{1,N},$ и $y\in A_l(x),$ где
$l\in \ov{1,N}\sm\{k\}.$

Для всех упорядоченных пар $(x,y), x\in \bbx, y\in \bbx,$ не удовлетворяющих
случаям
ни $1)$, ни $2)$,
значения $\mathbf{c}(x,y)$ могут задаваться произвольно и,
в частности, могут полагаться нулевыми.

Если $j\in\ov{1,N},$
то значения $c_j(x,y)$  функции $c_j$ содержательны
(и существенны с точки зрения (\ref{3.3.8`}, (\ref{3.3.8``}))
только при $(x,y) \in \bbm_j;$
для $(x,y)\in (\bbx\times \bbx)\sm \bbm_j$ можно определять
$c_j(x,y)$ произвольным образом и, в частности, можно полагать
для таких $(x,y)$ эти значения нулевыми.

Наконец,
$f(x)$ содержательно при $x\neq x^o,$
а точнее, при
$x\in \bbx\sm \{x^o\}$
значение$f(x^o)$  может быть произвольным и, в частности, нулевым.
\hfill $\Box$
\end{zam}

В связи с естественным вопросом о том, а нужно ли вообще определять
$\mathbf{c},c_1,\,\ldots,c_N$
на всем $\bbx \times \bbx$ и $f$ --- на $\bbx,$
заметим только, что это связано всего лишь с некоторыми соображениями методического
характера,
касающимися известной <<логической однородности>> используемых конструкций.
Это доставляет и некоторые удобства в вопросах введения последующих определений.
Отметим, в частности, что при
$(z_i)_{i\in\ov{0,N}}\in \bbz$ и $t\in \ov{1,N}$
определены значения
$$
  \mathbf{c}\bigl(\mathrm{pr}_2(z_{t-1}),\mathrm{pr}_1(z_t)\bigl)\in
  [0,\infty[, \ c_1(z_t)\in [0,\infty[,\ldots,c_N(z_t)\in [0,\infty[
  ,
$$
если при этом $t = N,$
то имеем
$f\bigl(\mathrm{pr}_2(z_t)\bigl) = f\bigl(\mathrm{pr}_2(z_N)\bigl)\in [0,\infty[.$
С учетом этого получаем,
что при
$\al\in \bbp$ и $(z_i)_{i\in\ov{0,N}}\in \bbz$
\bfn
  \label{3.3.30}
  \mathfrak{C}_\al[(z_i)_{i\in\ov{0,N}}] \df
  \sum\limits_{t=1}^N\bigl[\mathbf{c}\bigl(\mathrm{pr}_2(z_{t-1}),
  \mathrm{pr}_1(z_t)\bigl) + c_{\al(t)}(z_t)\bigl] + f\bigl(\mathrm{pr}_2(z_N)
  \bigl) \in [0,\infty[.
\efn

Для наших последующих целей $(\ref{3.3.30})$ важна в случаях,
когда
$\al\in \mathbf{A}$
(маршрут $\al$ допустим по предшествованию),
а
$(z_i)_{i\in\ov{0,N}} \in \cz_\al$.
Полезно также рассмотреть случай
$(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al$.

{\bf Основная задача}
формулируется следующим образом:
\bfn
  \label{3.3.31}
  \mathfrak{C}_\al[(z_i)_{i\in\ov{0,N}}]\longrightarrow
  \min,\ \al\in \mathbf{A}, (z_i)_{i\in\ov{0,N}}\in \cz_\al.
\efn

С учетом (\ref{3.3.26}) получаем,
что  в задаче (\ref{3.3.31}) существуют ДР,
составляющие непустое конечное множество.
Поэтому определено значение задачи
(экстремум)
\bfn
  \label{3.3.32}
  V \df \min\limits_{\al\in\mathbf{A}}\
  \min\limits_{(z_i)_{i\in\ov{0,N}}\in \cz_\al} \mathfrak{C}_\al[(z_i)_{i\in\ov{0,N}}]
  \in [0,\infty[
  .
\efn

Минимумы в $(\ref{3.3.32})$ действительно  достигаются.
С учетом этого называем ДР
$\bigl(\al^o,(z_i^o)_{i\in\ov{0,N}}\bigl)\in \mathbf{D},$
где
$\al^o\in \mathbf{A}$ и
$(z_i^o)_{i\in\ov{0,N}} \in \cz_{\al^o},$
оптимальным, если
\bfn
  \label{3.3.33}
  \mathfrak{C}_{\al^o}[(z_i^o)_{i\in\ov{0,N}}] = V.
\efn

Такие ДР (то есть ДР со свойством (\ref{3.3.33})) существуют.
Решение
задачи (\ref{3.3.32}) состоит в определении
$V$ (\ref{3.3.32})
и какого-либо ДР
$\bigl(\al^o,(z_i^o)_{i\in\ov{0,N}}\bigl) \hm \in \mathbf{D}$
со свойством (\ref{3.3.33}).

Наряду с (\ref{3.3.31}) отметим следующую задачу:
\bfn
  \label{3.3.34}
  \mathfrak{C}_\al[(z_i)_{i\in\ov{0,N}}]\longrightarrow \min,\
  \al\in \mathbf{A}, (z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al.
\efn

С учетом (\ref{3.3.27}) имеем,
что в задаче (\ref{3.3.34}) существуют ДР,
которые составляют непустое конечное множество.
Тогда определено значение
\bfn
  \label{3.3.35}
  \widetilde{V} \df \min\limits_{\al\in\mathbf{A}}\
  \min\limits_{(z_i)_{i\in\ov{0,N}}\in \mathbf{Z}_\al} \mathfrak{C}_\al[
  (z_i)_{i\in\ov{0,N}}]
  .
\efn

При этом существуют ДР
$\bigl(\tilde{\al}^o,(\tilde{z}_i^o)_{i\in\ov{0,N}}
\bigl)\in \widetilde{\mathbf{D}}$
со свойством
\bfn
  \label{3.3.36}
  \mathfrak{C}_{\tilde{\al}^o}
  [(\tilde{z}_i^o)_{i\in\ov{0,N}}] = \widetilde{V}.
\efn

Напомним, что
$\cz_\al \su \mathbf{Z}_\al$ при
$\al\in \mathbf{A}$,
см. (\ref{3.3.18}).
Поэтому согласно (\ref{3.3.26}) и (\ref{3.3.27})
\bfn
  \label{3.3.37}
  \mathbf{D}\su \widetilde{\mathbf{D}}.
\efn

Из $(\ref{3.3.26}), (\ref{3.3.27}), (\ref{3.3.32})$ и $(\ref{3.3.35})$
вытекает неравенство
\bfn
  \label{3.3.38}
  \widetilde{V} \leqslant V.
\efn

Разность $V -\widetilde{V}\in [0,\infty[$
характеризует плату
(по результату)
за соблюдение ограничений, определяемых посредством мультифункций (\ref{3.3.9}),
в этой связи см. (\ref{3.3.16}).

Возвращаясь к (\ref{3.3.31}),
отметим, что данная задача является сложной
оптимизационной задачей с зависимыми (связанными) переменными:
имеются в виду
маршрут и трасса (траектория).
Для ее решения будем использовать метод ДП, что,
в свою очередь,
потребует построения специального расширения задачи (\ref{3.3.31}).
При этом сама эта задача будет погружаться в семейство специальным образом
построенных частичных или укороченных задач.
